# Railway.app å…è´¹éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•å°†è‡ªåŠ¨åŒ–æµ‹è¯•ç®¡ç†å¹³å°å…è´¹éƒ¨ç½²åˆ° Railway.appã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ¡ˆæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Railway.app Cloud                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           PostgreSQL (Railway æä¾›)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                        â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Django Backend (Daphne)               â”‚   â”‚
â”‚  â”‚   â€¢ REST API                                      â”‚   â”‚
â”‚  â”‚   â€¢ WebSocket                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                        â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              RabbitMQ (Docker)                     â”‚   â”‚
â”‚  â”‚   â€¢ æ¶ˆæ¯é˜Ÿåˆ—                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP + WebSocket
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              Vercel (å‰ç«¯)              â”‚
              â”‚          Vue 3 SPA                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æ³¨å†Œè´¦å·

- **Railway**: https://railway.app/
- **Vercel** (å¯é€‰): https://vercel.com/
- **GitHub**: éœ€è¦ï¼Œç”¨äºä»£ç ä»“åº“

### 2. å‡†å¤‡ä»£ç ä»“åº“

å°†ä½ çš„ä»£ç æ¨é€åˆ° GitHubï¼ˆå·²å®Œæˆï¼‰

---

## ğŸ³ åç«¯éƒ¨ç½² (Railway)

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼ŒåŒ…å« RabbitMQï¼‰

#### æ­¥éª¤ 1ï¼šåˆ›å»ºæ–°é¡¹ç›®

1. ç™»å½• Railway.app
2. ç‚¹å‡» **"New Project"**
3. é€‰æ‹© **"Deploy from Docker Compose"**
4. è¿æ¥ä½ çš„ GitHub ä»“åº“

#### æ­¥éª¤ 2ï¼šé€‰æ‹©é…ç½®æ–‡ä»¶

é€‰æ‹© `railway-compose.yml` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```yaml
version: "3.8"

services:
  # RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—
  rabbitmq:
    image: rabbitmq:3.12-management
    environment:
      RABBITMQ_DEFAULT_USER: guest
      RABBITMQ_DEFAULT_PASS: guest
    volumes:
      - railway-data:/var/lib/rabbitmq

  # Django åç«¯
  backend:
    image: python:3.11-slim
    environment:
      DJANGO_SETTINGS_MODULE: core.settings
      RABBITMQ_HOST: rabbitmq  # è¿æ¥åˆ°åŒé¡¹ç›®çš„ RabbitMQ
      DATABASE_URL: ${Postgres.DATABASE_URL}
```

#### æ­¥éª¤ 3ï¼šé…ç½®ç¯å¢ƒå˜é‡

Railway ä¼šè‡ªåŠ¨åˆ›å»º PostgreSQLï¼Œåœ¨ Variables ä¸­æ·»åŠ ï¼š

| å˜é‡å | å€¼ |
|---------|-----|
| `DJANGO_SECRET_KEY` | Railway è‡ªåŠ¨ç”Ÿæˆæˆ–è‡ªå·±è®¾ç½® |
| `DJANGO_ALLOWED_HOSTS` | `*` |
| `CORS_ALLOWED_ORIGINS` | `https://your-frontend.vercel.app` |

#### æ­¥éª¤ 4ï¼šéƒ¨ç½²

ç‚¹å‡» **"Deploy"**ï¼ŒRailway ä¼šï¼š
1. å¯åŠ¨ RabbitMQ æœåŠ¡
2. å¯åŠ¨ PostgreSQL æ•°æ®åº“
3. æ„å»º Django åç«¯
4. è¿è¡Œæ•°æ®åº“è¿ç§»
5. å¯åŠ¨ Daphne æœåŠ¡å™¨

**å®Œæˆåä¼šå¾—åˆ°ä¸€ä¸ª URL**ï¼Œä¾‹å¦‚ï¼š`https://auto-test-backend.railway.app`

---

### æ–¹å¼äºŒï¼šä»…éƒ¨ç½²åç«¯ï¼ˆä½¿ç”¨å¤–éƒ¨ RabbitMQï¼‰

å¦‚æœä½¿ç”¨ CloudAMQP å…è´¹ç‰ˆï¼ˆ10,000æ¡æ¶ˆæ¯/æœˆï¼‰ï¼š

1. æ³¨å†Œ CloudAMQP: https://www.cloudamqp.com/
2. åˆ›å»ºå…è´¹å®ä¾‹
3. è·å–è¿æ¥ä¿¡æ¯

ç„¶ååœ¨ Railway ç¯å¢ƒå˜é‡ä¸­æ·»åŠ ï¼š

```bash
RABBITMQ_HOST=your-instance.cloudamqp.com
RABBITMQ_PORT=5672
RABBITMQ_USER=your-username
RABBITMQ_PASSWORD=your-password
RABBITMQ_VHOST=your-vhost
```

---

## ğŸŒ å‰ç«¯éƒ¨ç½² (Vercel)

### æ­¥éª¤ 1ï¼šå¯¼å…¥é¡¹ç›®

1. ç™»å½• Vercel
2. ç‚¹å‡» **"Add New Project"**
3. é€‰æ‹© **"Import Git Repository"**
4. é€‰æ‹© `auto-test-platform` ä»“åº“

### æ­¥éª¤ 2ï¼šé…ç½®é¡¹ç›®

é€‰æ‹© `frontend` ç›®å½•ï¼Œæˆ–ä½¿ç”¨ `vercel.json` é…ç½®ï¼š

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "env": {
    "VITE_API_BASE_URL": "https://auto-test-backend.railway.app/api"
  }
}
```

### æ­¥éª¤ 3ï¼šéƒ¨ç½²

ç‚¹å‡» **"Deploy"**ï¼Œå®Œæˆåå¾—åˆ°ï¼š`https://auto-test.vercel.app`

---

## âš™ï¸ æ‰§è¡Œæœºå®¢æˆ·ç«¯é…ç½®

éƒ¨ç½²åï¼Œç»™æ‰§è¡Œæœºç”¨æˆ·çš„é…ç½®ä¿¡æ¯ï¼š

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **æœåŠ¡å™¨åœ°å€** | `https://auto-test-backend.railway.app` |
| **RabbitMQ ä¸»æœº** | `auto-test-backend.railway.app` (æˆ–å†…éƒ¨æœåŠ¡å) |
| **RabbitMQ ç«¯å£** | `5672` |
| **è´¦å·** | åœ¨å¹³å°çš„ã€Œè´¦å·è§’è‰²ç®¡ç†ã€è·å– |

---

## ğŸ’° æˆæœ¬ä¼°ç®—

### Railway å…è´¹å¥—é¤

| èµ„æº | å…è´¹é¢åº¦ |
|--------|----------|
| è¿è¡Œæ—¶é—´ | $5/æœˆï¼ˆçº¦ 720 å°æ—¶ï¼‰ |
| RAM | 512MB |
| CPU | 0.5 vCPU |
| å­˜å‚¨ | 1GB |
| ç½‘ç»œæµé‡ | 100GB/æœˆ |

**è¯„ä¼°**ï¼š
- âœ… è¶³å¤Ÿå¼€å‘/æ¼”ç¤ºä½¿ç”¨
- âš ï¸ ç”Ÿäº§ç¯å¢ƒå»ºè®®å‡çº§ä»˜è´¹ç‰ˆï¼ˆ$5/æœˆèµ·ï¼‰

### Vercel å…è´¹å¥—é¤

| èµ„æº | å…è´¹é¢åº¦ |
|--------|----------|
| æ„å»ºæ—¶é—´ | 6000 åˆ†é’Ÿ/æœˆ |
| å¸¦å®½ | 100GB/æœˆ |
| éƒ¨ç½² | æ— é™ |

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: è¶…å‡ºå…è´¹é¢åº¦æ€ä¹ˆåŠï¼Ÿ

**A**: Railway ä¼šæš‚åœæœåŠ¡ï¼Œä¸‹ä¸ªæœˆè‡ªåŠ¨æ¢å¤ã€‚æˆ–ä»˜è´¹å‡çº§ã€‚

### Q: WebSocket è¿æ¥ä¸ä¸Šï¼Ÿ

**A**: æ£€æŸ¥ï¼š
1. åç«¯ä½¿ç”¨ Daphne å¯åŠ¨ï¼ˆä¸æ˜¯ runserverï¼‰
2. Vercel ç¯å¢ƒå˜é‡ä¸­ API åœ°å€æ­£ç¡®
3. Railway é˜²ç«å¢™å…è®¸ WebSocket

### Q: æ•°æ®ä¿å­˜åœ¨å“ªï¼Ÿ

**A**:
- Railway: PostgreSQL æ•°æ®åœ¨ Railway äº‘ç«¯
- RabbitMQ: æ¶ˆæ¯é˜Ÿåˆ—åœ¨å†…å­˜ä¸­ï¼ˆé‡å¯ä¼šä¸¢å¤±ï¼Œå¯é…ç½®æŒä¹…åŒ–ï¼‰

### Q: å¦‚ä½•è®¿é—® RabbitMQ ç®¡ç†ç•Œé¢ï¼Ÿ

**A**: Railway é¡¹ç›®ä¸­ï¼Œç‚¹å‡» RabbitMQ æœåŠ¡ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå…¬ç½‘ URLï¼Œå¦‚ï¼š
`https://rabbitmq-xxx.railway.app`

---

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®è®¤ï¼š

- [ ] åç«¯ API å¯ä»¥è®¿é—®ï¼ˆ`/api/` è·¯å¾„è¿”å›æ•°æ®ï¼‰
- [ ] WebSocket å¯ä»¥è¿æ¥ï¼ˆ`/ws/` è·¯å¾„å¯è¿æ¥ï¼‰
- [ ] å‰ç«¯å¯ä»¥æ­£å¸¸åŠ è½½
- [ ] å¯ä»¥åˆ›å»ºç”¨æˆ·å¹¶ç™»å½•
- [ ] æ‰§è¡Œæœºå¯ä»¥è¿æ¥

---

## ğŸš€ ä¸‹ä¸€æ­¥

éƒ¨ç½²æˆåŠŸåï¼š

1. **åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·**
   ```bash
   # Railway Console â†’ ä½ çš„åç«¯é¡¹ç›® â†’ Shell
   python manage.py createsuperuser
   ```

2. **ç»‘å®šè‡ªå®šä¹‰åŸŸå**ï¼ˆå¯é€‰ï¼‰
   - Railway: åœ¨é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ 
   - Vercel: åœ¨é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ 

3. **é…ç½®æ‰§è¡Œæœºå®¢æˆ·ç«¯**
   - ä¸‹è½½ `executor-setup.exe`
   - ä½¿ç”¨äº‘ç«¯é…ç½®ä¿¡æ¯å®‰è£…

---

## ğŸ“ è·å–å¸®åŠ©

- Railway æ–‡æ¡£: https://docs.railway.app/
- Vercel æ–‡æ¡£: https://vercel.com/docs
- é¡¹ç›® Issues: https://github.com/shuaihuidong/auto-test-platform/issues
