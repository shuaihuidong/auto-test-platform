# Zeabur 部署超详细教程（2026 最新版）

> 本教程一步步教你如何将自动化测试平台部署到 Zeabur，适合零基础用户。

## 目录

1. [为什么选择 Zeabur](#为什么选择-zeabur)
2. [准备工作](#准备工作)
3. [步骤一：注册账户](#步骤一注册账户)
4. [步骤二：创建项目](#步骤二创建项目)
5. [步骤三：部署后端服务](#步骤三部署后端服务)
6. [步骤四：部署 RabbitMQ](#步骤四部署-rabbitmq)
7. [步骤五：部署前端服务](#步骤五部署前端服务)
8. [步骤六：配置环境变量](#步骤六配置环境变量)
9. [步骤七：创建管理员账号](#步骤七创建管理员账号)
10. [步骤八：测试部署](#步骤八测试部署)
11. [常见问题解决](#常见问题解决)

---

## 为什么选择 Zeabur？

| 优势 | 说明 |
|------|------|
| 国内访问快 | 香港/新加坡节点，延迟低 |
| 免费额度 | $5/月，约 170 小时运行时间 |
| 自动部署 | 代码推送到 GitHub 自动更新 |
| 中文界面 | 完全中文化，操作简单 |
| 一键部署 | 自动识别 Dockerfile |

---

## 准备工作

在开始之前，请确认：

- [ ] 你有一个 **GitHub 账号**，代码已推送到仓库
- [ ] 你有一个 **常用邮箱**（用于注册 Zeabur）
- [ ] 你有一个 **手机号**（用于验证，大陆+86 号码支持）
- [ ] 大约 **30 分钟**的空闲时间

**所需账户信息：**
- GitHub 仓库：`shuaihuidong/auto-test-platform`
- 或你自己的 Fork 仓库

---

## 步骤一：注册账户

### 1.1 访问 Zeabur

在浏览器中打开：https://zeabur.com

你会看到登录页面，有两个选项：
- **通过电子邮件继续** ← 点击这个
- Continue with Google

### 1.2 输入邮箱

1. 在输入框中输入你的邮箱地址
2. 点击 **"通过电子邮件继续"** 按钮
3. 页面会显示：**"登录链接已发送"**

### 1.3 验证邮箱

1. 打开你的邮箱（Gmail、QQ邮箱、163等）
2. 查找来自 **Zeabur** 的邮件（标题通常为"登录"）
3. 点击邮件中的 **"登录"** 按钮

> 提示：如果没收到邮件，检查垃圾邮件文件夹

### 1.4 账户验证

首次登录后，系统会要求验证账户（三选一）：

#### 方式一：手机号码验证（推荐）

1. 点击 **"手机号码"** 区域
2. 选择国家代码：中国 **+86**
3. 输入你的手机号
4. 点击 **"发送验证码"**
5. 输入收到的 6 位验证码
6. 点击 **"验证"**

#### 方式二：预存额度

1. 点击 **"预存使用额度"** 区域
2. 最低充值 **$10**（约 70 元）
3. 支持支付宝/微信支付
4. **注意**：只要不订阅付费服务，不会自动扣款

#### 方式三：绑定信用卡

1. 点击 **"绑定信用卡"** 区域
2. 输入信用卡信息
3. **注意**：仅作验证，不扣款

> 推荐：使用手机验证最方便，免费且快速

---

## 步骤二：创建项目

### 2.1 进入创建页面

登录成功后，你应该看到：

```
┌─────────────────────────────────────┐
│                                 │
│     [创建新项目]  按钮           │
│                                 │
└─────────────────────────────────────┘
```

如果看不到，点击右上角的 **"+"** 图标

### 2.2 填写项目信息

1. 点击 **"创建新项目"**

2. 选择区域（非常重要！）：

| 区域 | 推荐指数 | 说明 |
|------|----------|------|
| Hong Kong | ⭐⭐⭐⭐⭐ | 国内访问最快 |
| Singapore | ⭐⭐⭐⭐ | 国内访问较快 |
| Tokyo | ⭐⭐⭐ | 日韩访问快 |
| US West | ⭐⭐ | 美国西部 |

**强烈推荐选择：Hong Kong（香港）**

3. 输入项目名称：`auto-test-platform`
4. 点击 **"创建"** 按钮

### 2.3 项目创建成功

创建后你会看到项目页面：

```
┌─────────────────────────────────────┐
│  auto-test-platform               │
│                                 │
│  [添加服务]  按钮               │
│                                 │
│  暂无服务                       │
└─────────────────────────────────────┘
```

---

## 步骤三：部署后端服务

### 3.1 添加 Git 服务

1. 点击中央的 **"添加服务"** 按钮

2. 选择 **"Git"** 选项卡

3. 首次使用需要绑定 GitHub：
   - 点击 **"连接 GitHub"**
   - 授权 Zeabur 访问你的 GitHub
   - 等待约 1 分钟

### 3.2 选择仓库

1. 在搜索框输入：`auto-test-platform`

2. 选择你的仓库：
   - `shuaihuidong/auto-test-platform`
   - 或你自己 Fork 的仓库

3. Zeabur 会自动分析代码

### 3.3 配置后端服务

Zeabur 会显示构建配置：

| 配置项 | 值 |
|--------|-----|
| 服务名称 | backend（自动填充） |
| 根目录 | backend（**手动选择**） |
| Dockerfile | 自动检测到 |

**重要操作：**
1. 在 **"Root Directory"** 中输入或选择：`backend`
2. 确认 **Dockerfile** 路径为：`backend/Dockerfile`

### 3.4 开始部署

1. 点击右下角的 **"部署"** 按钮

2. 你会进入部署日志页面，看到类似：

```
Building...
Cloning repository...
Installing dependencies...
Building Docker image...
```

3. 等待约 3-5 分钟，状态变为 **● Running**

---

## 步骤四：部署 RabbitMQ

在等待后端部署时，可以同时部署 RabbitMQ。

### 4.1 添加市场服务

1. 返回项目页面（点击面包屑导航）
2. 再次点击 **"添加服务"**
3. 选择 **"市场"** 选项卡

### 4.2 搜索 RabbitMQ

1. 在搜索框输入：`rabbitmq`

2. 找到 **RabbitMQ** 服务，点击

3. 选择版本：`rabbitmq:3.12-management`

### 4.3 配置 RabbitMQ

配置页面：

| 配置项 | 值 |
|--------|-----|
| 服务名称 | rabbitmq |
| 镜像 | rabbitmq:3.12-management |

**环境变量（可选，建议修改）：**

| Key | Value | 说明 |
|-----|-------|------|
| RABBITMQ_DEFAULT_USER | admin | 自定义用户名 |
| RABBITMQ_DEFAULT_PASS | 设置强密码 | **必改！** |

4. 点击 **"部署"**

---

## 步骤五：部署前端服务

### 5.1 添加前端服务

1. 再次点击 **"添加服务"**
2. 选择 **"Git"** 选项卡
3. 选择同一个仓库

### 5.2 配置前端服务

| 配置项 | 值 |
|--------|-----|
| 服务名称 | frontend |
| 根目录 | **frontend** |
| Dockerfile | 自动检测 `frontend/Dockerfile` |

### 5.3 配置前端环境变量

在部署前或部署后添加环境变量：

1. 找到 **"环境变量"** 部分
2. 点击 **"添加变量"**
3. 添加以下变量：

| Key | Value | 说明 |
|-----|-------|------|
| BACKEND_URL | 暂时留空，部署后填入 | 后端地址 |

**注意**：BACKEND_URL 需要等后端部署完成后才能填写

### 5.4 开始部署

点击 **"部署"** 按钮，等待 2-3 分钟

---

## 步骤六：配置环境变量

### 6.1 获取后端地址

后端部署完成后：

1. 点击 **backend** 服务
2. 在页面顶部找到 **域名**（如：`https://xxx.zeabur.app`）
3. 点击复制按钮

### 6.2 配置后端环境变量

在 backend 服务中：

1. 点击 **"设置"** 标签页
2. 找到 **"环境变量"** 部分
3. 点击 **"添加变量"**

添加以下变量：

| Key | Value | 说明 |
|-----|-------|------|
| DEBUG | False | 生产环境关闭调试 |
| DJANGO_ALLOWED_HOSTS | *.zeabur.app | 允许的域名 |
| SECRET_KEY | 随机生成 | Django 密钥 |

**生成 SECRET_KEY 的方法：**
```bash
# 在本地终端运行
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

### 6.3 配置前端环境变量

1. 返回项目首页，点击 **frontend** 服务
2. 点击 **"设置"** 标签页
3. 添加/编辑环境变量：

| Key | Value |
|-----|-------|
| BACKEND_URL | 后端的完整域名（不含端口） |

**示例：**
```
BACKEND_URL = https://abc-backend.zeabur.app
```

4. 保存后会自动重新部署前端

### 6.4 连接后端与 RabbitMQ

在 backend 服务的环境变量中添加：

| Key | Value |
|-----|-------|
| RABBITMQ_HOST | rabbitmq |
| RABBITMQ_PORT | 5672 |
| RABBITMQ_USER | guest（或你设置的） |
| RABBITMQ_PASSWORD | guest（或你设置的） |

**注意**：在 Zeabur 内部，服务之间用服务名通信（`rabbitmq`），不用完整域名

---

## 步骤七：创建管理员账号

### 7.1 打开后端终端

1. 进入 **backend** 服务页面
2. 找到并点击 **"终端"**（Terminal）标签

3. 你会看到一个黑色命令行界面

### 7.2 运行创建命令

在终端中输入以下命令（按回车）：

```bash
python manage.py createsuperuser
```

### 7.3 填写管理员信息

按提示输入：

```
Username: admin
Email address: admin@example.com
Password: [输入密码，至少8位]
Password (again): [再次输入密码]
Superuser created successfully.
```

**记住你的账号密码！**

---

## 步骤八：测试部署

### 8.1 访问前端

1. 在项目首页点击 **frontend** 服务
2. 点击显示的域名链接
3. 浏览器打开新标签页

### 8.2 登录测试

1. 在登录页面输入你创建的管理员账号
2. 点击登录
3. 成功进入系统 = 部署成功！

### 8.3 检查服务状态

在 Zeabur 项目页面，你应该看到：

```
┌─────────────────────────────────────┐
│  ● backend    ● Running          │
│  ● frontend   ● Running          │
│  ● rabbitmq  ● Running          │
└─────────────────────────────────────┘
```

---

## 常见问题解决

### Q1: 后端部署失败，日志显示错误

**错误：** `ModuleNotFoundError: No module named 'xxx'`

**解决：**
1. 检查 `requirements.txt` 文件是否存在
2. 确认在 backend 根目录下

**错误：** `collectstatic failed`

**解决：** 已在 Dockerfile 中修复，会在启动时运行

### Q2: 前端无法连接后端

**症状：** 浏览器控制台显示 CORS 错误

**解决：**
1. 检查前端环境变量 `BACKEND_URL` 是否正确
2. 检查后端环境变量 `CORS_ALLOWED_ORIGINS`
3. 确保使用 https:// 而不是 http://

### Q3: 前端部署成功但页面空白

**原因：** nginx 配置问题或环境变量未替换

**解决：**
1. 检查前端环境变量是否设置
2. 查看前端部署日志
3. 确认 `nginx.conf.template` 文件存在

### Q4: 如何查看部署日志？

1. 进入对应服务页面
2. 点击 **"部署"** 标签页
3. 选择一次部署记录查看详细日志

### Q5: RabbitMQ 连接失败

**错误信息：** `Connection refused` 或 `AMQP connection failed`

**解决：**
1. 确认 RabbitMQ 服务状态为 Running
2. 检查后端环境变量：
   - `RABBITMQ_HOST=rabbitmq`（不是完整域名）
   - `RABBITMQ_PORT=5672`
   - `RABBITMQ_USER` 和 `RABBITMQ_PASSWORD` 正确

### Q6: 免费额度用完了怎么办？

**症状：** 服务自动停止

**解决：**
- 下月 1 号自动重置
- 或充值 $10 继续使用
- 或删除不用的服务释放额度

### Q7: 如何更新代码？

推送代码到 GitHub 后：

**自动更新（推荐）：**
- Zeabur 会自动检测到新提交
- 约一分钟内自动重新部署

**手动更新：**
1. 进入服务页面
2. 点击 **"部署"** 标签
3. 点击 **"重新部署"** 按钮

### Q8: 数据会丢失吗？

**SQLite 数据库：**
- 存储在容器内
- 容器重启后数据**会丢失**

**解决方案：**
1. 进入服务 → 设置 → 持久化存储
2. 添加路径：`/app/db.sqlite3`
3. 或使用 Zeabur 提供的 PostgreSQL

---

## 部署检查清单

部署前检查：

- [ ] GitHub 仓库代码是最新的
- [ ] backend/Dockerfile 文件存在
- [ ] frontend/Dockerfile 文件存在
- [ ] frontend/nginx.conf.template 文件存在
- [ ] 已完成 Zeabur 账户验证

部署后检查：

### 后端服务
- [ ] 状态显示 ● Running
- [ ] 环境变量已配置（DEBUG=False, SECRET_KEY, 等）
- [ ] 域名可以访问（显示 Django 错误页面也说明成功）

### RabbitMQ 服务
- [ ] 状态显示 ● Running
- [ ] 环境变量已配置（用户名密码）
- [ ] 管理界面可以访问（端口 15672）

### 前端服务
- [ ] 状态显示 ● Running
- [ ] BACKEND_URL 环境变量已设置
- [ ] 域名可以访问，显示登录页面

### 功能测试
- [ ] 可以用管理员账号登录
- [ ] 登录后可以正常使用系统
- [ ] WebSocket 连接正常（打开浏览器控制台查看）

---

## 成本参考

| 资源 | 免费额度 |
|------|----------|
| CPU | 512 CPU 小时/月 |
| 内存 | 512 MB × 3 个服务 |
| 流量 | 100 GB/月 |
| 存储 | 按需计费 |

**计算：**
- 3 个服务 × 512MB = 1.5GB 内存
- 512 ÷ 24 ÷ 30 ≈ 每天可运行 0.7 小时
- **实际上 Zeabur 按实际使用时间计费**
- 演示项目完全足够

---

## 下一步

部署成功后，你可以：

1. **配置自定义域名**
   - 进入项目 → 域名
   - 绑定你自己的域名

2. **设置持续集成**
   - 连接 GitHub 自动部署
   - 推送代码自动更新

3. **添加数据库**
   - 使用 PostgreSQL 替代 SQLite
   - 数据更安全可靠

4. **配置执行机**
   - 在平台的"账号角色管理"中
   - 点击"RabbitMQ配置"获取连接信息
   - 配置执行机客户端

---

**文档更新时间：2026-02**
**Zeabur 官方文档：https://zeabur.com/docs**
**遇到问题：加入 Zeabur Discord 社区求助**
